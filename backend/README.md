ChatGPT dijo:
# TechHelpDesk API

Comprehensive REST API for managing technical support tickets, designed to handle **administrators**, **technicians**, and **clients** through role-based access control.  
Built using **NestJS**, **TypeORM 0.3.x**, and **PostgreSQL (Supabase)** with a dedicated schema named `helpdesk`.

---

## ğŸš€ Stack & Core Technologies

- **NestJS 11 (TypeScript)** â€” structured modular framework for backend services.
- **TypeORM 0.3.x** â€” ORM for database modeling and migrations.
- **PostgreSQL / Supabase** â€” relational database storage (schema `helpdesk`).
- **JWT Authentication** â€” secure access via Bearer tokens.
- **Role Guards** â€” enforce access levels (ADMIN, TECHNICIAN, CLIENT).
- **Validation Layer** â€” input validation via `class-validator` & `class-transformer`.
- **Swagger UI** â€” autogenerated API documentation.
- **Testing Suite** â€” powered by Jest, with coverage for services and controllers.
- **Docker / Docker Compose** â€” containerized environment setup.

---

## âš™ï¸ Prerequisites

Before running the project, ensure you have:

- **Node.js 20+**  
- **PostgreSQL 14+** or an active **Supabase** project  
- **Docker + Docker Compose** *(optional but recommended for deployment)*  
- **npm or yarn** for dependency management  

---

## ğŸ”§ Environment Configuration

### 1. Copy and edit environment files

```bash
cp .env.example .env

2. Required variables
Variable	Description
DATABASE_URL	Connection string to PostgreSQL/Supabase
JWT_SECRET	Secret key used for signing JWT tokens
JWT_EXPIRES_IN	Expiration time for JWT tokens in seconds
NODE_ENV	Runtime environment (development, production, etc.)

When using Docker Compose, the app reads .env.docker automatically.

ğŸ—„ï¸ Database & Schema

The project uses Supabase with schema helpdesk, containing all entities:

Table	Description
helpdesk.users	Base user table for all roles (ADMIN, CLIENT, TECHNICIAN)
helpdesk.clients	Client profiles linked to users
helpdesk.technicians	Technician profiles linked to users
helpdesk.categories	Ticket categories managed by ADMIN
helpdesk.tickets	Core table for support tickets and their relationships
SQL Import

A prebuilt dump file helpdesk_dump.sql initializes schema and demo data:

psql "$DATABASE_URL" -f helpdesk_dump.sql

ğŸ§© Installation & Local Execution
cd backend
npm install
npm run start:dev


The API will be available at http://localhost:3000
,
and Swagger documentation at http://localhost:3000/docs
.

ğŸ³ Docker Setup

Build and launch containers:

cd backend
docker compose build
docker compose up -d


The container automatically injects environment variables from .env.docker.

Logs are accessible using docker compose logs -f.

ğŸ“œ NPM Scripts
Command	Description
npm run start	Starts the server in production mode
npm run start:dev	Starts the server in watch/development mode
npm run build	Compiles TypeScript into JavaScript
npm run test	Runs Jest unit tests
npm run migration:run	Executes pending TypeORM migrations
npm run seed	Populates the database with initial users and data
ğŸ§± Project Architecture
src/
 â”œâ”€â”€ app.module.ts             # Root module loading all feature modules
 â”œâ”€â”€ main.ts                   # App bootstrap (NestFactory)
 â”œâ”€â”€ auth/                     # JWT login, guards, strategies, decorators
 â”œâ”€â”€ users/                    # Core user logic and role management
 â”œâ”€â”€ clients/                  # Client-specific operations and entities
 â”œâ”€â”€ technicians/              # Technician-related CRUD and status
 â”œâ”€â”€ categories/               # Admin CRUD for ticket categories
 â”œâ”€â”€ tickets/                  # Ticket creation, assignment, and tracking
 â”œâ”€â”€ database/                 # TypeORM config, seeds, and migrations
 â”œâ”€â”€ common/                   # Global interceptors and exception filters
 â”œâ”€â”€ health/                   # Health checks and database status endpoint
 â””â”€â”€ tests/                    # Unit and e2e test suites

Global Modules

AuthModule â€” Handles login, JWT issuance, and authentication guards.

UsersModule â€” CRUD for users; only accessible by ADMIN.

ClientsModule & TechniciansModule â€” Profiles related to users.

TicketsModule â€” Ticket endpoints for all roles (admin/client/technician).

CategoriesModule â€” Admin-only CRUD operations.

CommonModule â€” Global filters/interceptors (ResponseInterceptor, HttpExceptionFilter).

HealthModule â€” Provides /health endpoint to verify DB and server.

ğŸ” Authentication & Authorization
Roles Supported

ADMIN â€” Full access: user management, category creation, ticket assignment.

TECHNICIAN â€” Restricted access: view assigned tickets, update status.

CLIENT â€” Can create and view their own tickets only.

JWT Usage

Tokens are generated via /auth/login

Swagger supports Bearer authentication:

Use /auth/login to obtain a token.

Click Authorize in Swagger and paste Bearer <token>.

ğŸ§  Swagger Documentation

Available at:
ğŸ“ http://localhost:3000/docs

Includes:

All endpoint descriptions.

Example request/response bodies.

Security schemes (JWT Bearer).

Separation by modules (auth, users, tickets, categories, etc).

ğŸ§ª Testing

Run all tests:

npm run test


Sample focused test:

npm run test src/tickets/tickets.service.spec.ts


Unit tests cover:

Ticket creation

Status updates

Authentication and guards

Service-level logic validation

ğŸ§‘â€ğŸ’¼ Default Users (Seeded)

Automatically created when running the seed script or importing the dump:

Administrator

Email: admin@helpdesk.com

Role: ADMIN

Password: Admin123*

Client

Email: client1@empresa.com

Role: CLIENT

Password: Client123*

Technician

Email: tech1@helpdesk.com

Role: TECHNICIAN

Password: Tech123*

These accounts can be used directly in Swagger or Postman to test authentication, role-based endpoints, and permissions.

ğŸ’» Health & Monitoring

GET /health â€” checks application and database connection.

Returns:

{
  "status": "ok",
  "database": "connected",
  "timestamp": "2025-12-09T00:00:00.000Z"
}

ğŸ§¾ Example Workflow

Login as ADMIN via /auth/login and create categories or assign technicians.

Login as CLIENT to create a new ticket under an existing category.

Login as TECHNICIAN to view assigned tickets and update their status to IN_PROGRESS or RESOLVED.

ADMIN can monitor all tickets and manage users or roles.

ğŸ“œ License

TechHelpDesk API is distributed for internal academic or testing purposes.
You may freely extend or adapt the codebase for commercial or production use, ensuring you comply with third-party dependency licenses.

